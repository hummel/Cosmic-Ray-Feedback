\section{Numerical Methods}
\label{methods}

\subsection{Initial Setup}
\label{setup}

Using the well-tested $N$-body smoothed particle hydrodynamics code GADGET2 \citep{Springel2005}, we initialise our simulations using the same setup described in \citet{Hummeletal2014}, allowing for a direct comparison of the impact of X-rays versus cosmic rays on the primordial gas.  The simulations were initialise at $z=100$ in a 140 comoving kpc box with periodic boundary conditions. To accelerate structure formation in the simulation box an artificially enhanced normalisation of the power spectrum, $\sigma_8 = 1.4$, was used, but the simulations are otherwise initialised in accordance with a $\Lambda$CDM model of hierarchical structure formation. For a discussion of the validity of this choice, see \citet{StacyGreifBromm2010}.
